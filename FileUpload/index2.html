<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8" />
	<title>jQuery File Upload Example</title>
	<script src="js/vendor/jquery.js" type="text/javascript"></script>
	<script src="js/vendor/jquery.ui.widget.js" type="text/javascript"></script>
	<script src="js/jquery.iframe-transport.js" type="text/javascript"></script>
	<script src="js/jquery.fileupload.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(function () {
			$('#fileupload').fileupload({
				dataType: 'json',
				// forceIframeTransport: true,
				url: 'upload.ashx',
				add: function (e, data) {
					// debugger; // dlh
					data.context = $('<button/>')
						.text('Upload')
						.appendTo(document.body)
						.click(function () {
							// debugger; // dlh
							var message = $('<p/>').text('Uploading...');
							data.context = message;
							$(this).replaceWith(message);
							data.submit();
						});
				},
				done: function (e, data) {
					// debugger; // dlh
					data.context.text('Upload finished: ' + data.result.message);
				},
				fail: function (e, data) {
					// debugger; // dlh
					data.context.text('Fail.');
				}
			});
		});
	</script>
</head>
<body>
	<form>
	<input id="fileupload" type="file" name="files[]">
	</form>
</body>
</html>
